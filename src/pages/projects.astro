---
import RootLayout from "@layouts/root.astro";
import { getCollection } from "astro:content";

import { UserNav } from "../components/projects/user-nav";
import { ProjectTable } from "../components/projects/project-table";
import { columns } from "../components/projects/columns";

const locations = await getCollection("locations");

const normalized = locations.map((loc) => ({ ...loc.data }));
---

<RootLayout
  title='Progress'
  description='A project management and issue tracker.'
>
  <div class='hidden h-full flex-1 flex-col space-y-8 p-8 md:flex'>
    <div class='flex items-center justify-between space-y-2'>
      <div>
        <h2 class='text-2xl font-bold tracking-tight'>Welcome back!</h2>
        <p class='text-muted-foreground'>
          Here&apos;s a list of your tasks for this month!
        </p>
      </div>
      <div class='flex items-center space-x-2'>
        <UserNav client:load />
      </div>
    </div>
    <ProjectTable data={normalized} columns={columns} />
    <!-- <DataTable data={tasks} columns={columns} /> -->
  </div>
</RootLayout>
